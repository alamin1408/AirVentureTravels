<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AirVenture Travels | Book Flight</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-all duration-300">

  <!-- ğŸŒ Header -->
  <header class="bg-blue-600 text-white shadow-md">
    <div class="max-w-6xl mx-auto flex justify-between items-center p-4">
      <h1 class="text-2xl font-bold">âœˆï¸ AirVenture Travels</h1>
      <nav class="space-x-4">
        <a href="index.html" class="hover:underline">Home</a>
        <a href="about.html" class="hover:underline">About</a>
        <a href="package.html" class="hover:underline">Packages</a>
        <a href="booking.html" class="hover:underline">Booking</a>
        <a href="contact.html" class="hover:underline">Contact</a>
      </nav>
      <button id="darkToggle" class="ml-4 bg-white text-blue-600 px-3 py-1 rounded-lg font-semibold dark:bg-gray-800 dark:text-yellow-400">
        ğŸŒ™
      </button>
    </div>
  </header>

  <!-- âœˆï¸ Booking Form -->
  <section id="flights" class="py-12">
    <div class="max-w-3xl mx-auto text-center">
      <h2 class="text-3xl font-bold mb-6">Book Your Flight</h2>
      <p class="text-gray-600 dark:text-gray-400 mb-8">Fill up the form and weâ€™ll get back to you soon.</p>

      <form action="https://formspree.io/f/xgvnplle" method="POST" class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-md">
        
        <!-- Row 1 -->
        <div class="grid md:grid-cols-2 gap-4">
          <input type="text" name="first_name" placeholder="First Name" required class="p-3 border rounded-lg w-full dark:bg-gray-700">
          <input type="text" name="last_name" placeholder="Last Name" required class="p-3 border rounded-lg w-full dark:bg-gray-700">
        </div>

        <!-- Row 2 -->
        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <div class="flex items-center border rounded-lg p-3 dark:border-gray-600">
            <select id="countryCode" class="bg-transparent outline-none mr-2 dark:bg-gray-700">
              <option value="+880">ğŸ‡§ğŸ‡© +880</option>
              <option value="+91">ğŸ‡®ğŸ‡³ +91</option>
              <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
              <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
              <option value="+81">ğŸ‡¯ğŸ‡µ +81</option>
              <option value="+971">ğŸ‡¦ğŸ‡ª +971</option>
              <option value="+61">ğŸ‡¦ğŸ‡º +61</option>
              <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
              <option value="+33">ğŸ‡«ğŸ‡· +33</option>
              <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
              <option value="+60">ğŸ‡²ğŸ‡¾ +60</option>
            </select>
            <input type="tel" name="mobile" placeholder="Mobile Number" required class="flex-1 outline-none dark:bg-gray-700">
          </div>
          <input type="email" name="email" placeholder="Email Address" required class="p-3 border rounded-lg w-full dark:bg-gray-700">
        </div>

        <!-- Row 3 -->
        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <input list="departureAirports" id="departure" name="from" placeholder="Departure City/Airport" required class="p-3 border rounded-lg w-full dark:bg-gray-700">
          <input list="arrivalAirports" id="arrival" name="to" placeholder="Arrival City/Airport" required class="p-3 border rounded-lg w-full dark:bg-gray-700">
          <datalist id="departureAirports"></datalist>
          <datalist id="arrivalAirports"></datalist>
        </div>

        <!-- Row 4 -->
        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <input type="date" name="date" required class="p-3 border rounded-lg w-full dark:bg-gray-700">
          <select name="trip_type" id="tripType" class="p-3 border rounded-lg w-full dark:bg-gray-700">
            <option value="One Way">One Way</option>
            <option value="Round Trip">Round Trip</option>
          </select>
        </div>

        <!-- Return Date (Hidden by default) -->
        <div id="returnDateContainer" class="mt-4 hidden">
          <input type="date" name="return_date" class="p-3 border rounded-lg w-full dark:bg-gray-700" placeholder="Return Date">
        </div>

        <!-- Row 5 -->
        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <select name="class" class="p-3 border rounded-lg w-full dark:bg-gray-700">
            <option value="Economy">Economy</option>
            <option value="Premium Economy">Premium Economy</option>
            <option value="Business">Business</option>
          </select>
          <textarea name="message" rows="1" placeholder="Additional Notes" class="p-3 border rounded-lg w-full dark:bg-gray-700"></textarea>
        </div>

        <!-- Button -->
        <button type="submit" class="mt-6 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition">
          Submit Booking
        </button>
      </form>
    </div>
  </section>

  <!-- ğŸŒ Footer -->
  <footer class="bg-blue-600 text-white text-center py-6 mt-12">
    <p>&copy; 2025 AirVenture Travels | Feel the Air, Live with Adventure ğŸŒ</p>
  </footer>

  <script>
  // ğŸŒ™ Dark Mode Toggle
  const toggle = document.getElementById("darkToggle");
  toggle.addEventListener("click", () => {
    document.documentElement.classList.toggle("dark");
  });

  // âœˆï¸ Round Trip Return Date Toggle
  const tripType = document.getElementById("tripType");
  const returnDateContainer = document.getElementById("returnDateContainer");
  tripType.addEventListener("change", () => {
    returnDateContainer.classList.toggle("hidden", tripType.value !== "Round Trip");
  });

  // âœˆï¸ Airport Autocomplete
  const apiKey = "b764df5d-f3af-4193-bc67-74b8ecc94b7f";
  async function loadAirports(inputId, datalistId) {
    const input = document.getElementById(inputId);
    const datalist = document.getElementById(datalistId);
    input.addEventListener("input", async () => {
      const query = input.value.trim();
      if (query.length < 2) return;
      try {
        const res = await fetch(`https://airlabs.co/api/v9/suggest?q=${query}&api_key=${apiKey}`);
        const data = await res.json();
        datalist.innerHTML = "";
        if (data?.response?.airports?.length) {
          data.response.airports.forEach(airport => {
            const option = document.createElement("option");
            option.value = `${airport.name} (${airport.iata_code})`;
            datalist.appendChild(option);
          });
        }
      } catch (err) {
        console.error("Airport API Error:", err);
      }
    });
  }
  loadAirports("departure", "departureAirports");
  loadAirports("arrival", "arrivalAirports");
  </script>

import { useState, useEffect } from "react";

export default function FlightSearch() {
  const [from, setFrom] = useState("");
  const [to, setTo] = useState("");
  const [fromResults, setFromResults] = useState([]);
  const [toResults, setToResults] = useState([]);

  const API_KEY = "b764df5d-f3af-4193-bc67-74b8ecc94b7f";

  // Search airports dynamically
  const fetchAirports = async (query, setResults) => {
    if (query.length < 2) return setResults([]);
    try {
      const res = await fetch(
        `https://airlabs.co/api/v9/suggest?q=${query}&api_key=${API_KEY}`
      );
      const data = await res.json();
      setResults(data.response.airports || []);
    } catch (err) {
      console.error("Error fetching airports:", err);
    }
  };

  useEffect(() => {
    const delay = setTimeout(() => fetchAirports(from, setFromResults), 400);
    return () => clearTimeout(delay);
  }, [from]);

  useEffect(() => {
    const delay = setTimeout(() => fetchAirports(to, setToResults), 400);
    return () => clearTimeout(delay);
  }, [to]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-300">
      <div className="bg-white shadow-xl rounded-2xl p-8 w-full max-w-xl">
        <h1 className="text-2xl font-semibold text-center text-blue-700 mb-6">
          âœˆï¸ Find Your Flight
        </h1>

        <div className="space-y-6">
          {/* From */}
          <div className="relative">
            <label className="block text-gray-700 mb-1 font-medium">From</label>
            <input
              type="text"
              placeholder="Type city or airport name"
              value={from}
              onChange={(e) => setFrom(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
            />
            {fromResults.length > 0 && (
              <ul className="absolute z-10 bg-white border rounded-lg w-full max-h-52 overflow-auto mt-1 shadow-lg">
                {fromResults.map((airport) => (
                  <li
                    key={airport.code}
                    onClick={() => {
                      setFrom(`${airport.name} (${airport.code})`);
                      setFromResults([]);
                    }}
                    className="px-4 py-2 hover:bg-blue-100 cursor-pointer text-sm"
                  >
                    {airport.name} ({airport.code}) â€” {airport.country_name}
                  </li>
                ))}
              </ul>
            )}
          </div>

          {/* To */}
          <div className="relative">
            <label className="block text-gray-700 mb-1 font-medium">To</label>
            <input
              type="text"
              placeholder="Type destination airport"
              value={to}
              onChange={(e) => setTo(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
            />
            {toResults.length > 0 && (
              <ul className="absolute z-10 bg-white border rounded-lg w-full max-h-52 overflow-auto mt-1 shadow-lg">
                {toResults.map((airport) => (
                  <li
                    key={airport.code}
                    onClick={() => {
                      setTo(`${airport.name} (${airport.code})`);
                      setToResults([]);
                    }}
                    className="px-4 py-2 hover:bg-blue-100 cursor-pointer text-sm"
                  >
                    {airport.name} ({airport.code}) â€” {airport.country_name}
                  </li>
                ))}
              </ul>
            )}
          </div>

          {/* Search Button */}
          <button className="w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all">
            Search Flights
          </button>
        </div>
      </div>
    </div>
  );
}
</body>
</html>